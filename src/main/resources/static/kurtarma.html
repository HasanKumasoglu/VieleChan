

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>E-Posta Giriş</title>
    <link rel="stylesheet" href="kurtarma.css">
</head>
<body>

<div class="container right-panel-active">
    <div class="container__form container--signup">
        <form class="form" id="form1">
            <h2 class="form__title">Şifre Kurtarma</h2>
            <input type="email" placeholder="E-Posta" class="input" id="e_posta" />
            <a class="btn" id="sendBtn" onclick="kodAT()">Kod At</a>
        </form>
    </div>
</div>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>


        function kodAT() {
            var e_posta = document.getElementById("e_posta").value;

            if (e_posta.trim() === "") {
                alert("E-Posta boş bırakılamaz!");
                return;

            }

            var xhr = new XMLHttpRequest();
            xhr.open("GET", "http://localhost:8080/kullanici/sifremiUnuttum?e_posta="  + encodeURI(e_posta) , true);
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        //var response = JSON.parse(xhr.responseText);
                        //if (response != null) {
                            alert("Eğer E-Posta doğruysa E-Posta Gönderildi")
                        window.location.href= "chat.HTML.html";
                        //}



                    } else {
                        console.error("Sunucu hatası:", xhr.status);
                        alert("Sunucu hatası: " + xhr.status);
                    }
                }
            };
            xhr.send();
        }



    /*
    function kodAT() {
        var e_posta = document.getElementById("e_posta").value;

        if (e_posta.trim() === "") {
            alert("e-posta boş bırakılamaz!");
            return;
        }

        var xhr = new XMLHttpRequest();
        xhr.open("GET", "http://localhost:8080/kullanici/sifreunuttum" , true);
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
                if (xhr.status === 200) {
                    var response = JSON.parse(xhr.responseText);
                    if (response != null) {
                        alert("E-posta gönderildi !")
                    } else {
                        alert("Kullanıcı adı veya şifre hatalı!");
                    }
                } else {
                    console.error("Sunucu hatası:", xhr.status);
                    alert("Sunucu hatası: " + xhr.status);
                }
            }
        };
        xhr.send();
    }
    */


    /*

    $(document).ready(function() {
        $('#sendBtn').click(function(e) {
            e.preventDefault();
            var email = $('#e_posta').val();

            if (email.trim() !== '') {
                alert("Doğrulama kodu e-posta adresinize gönderildi.");

                fetch('http://localhost:8080/kullanici/sifreunuttum', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: 'email=' + encodeURIComponent(email)
                })

                    /*.then(function(response) {
                        if (response.ok) {
                            window.location.href = "kurtarmaKodKabul.html";
                        } else {
                            alert("Sistemimizde böyle bir e-posta yok!");
                        }
                    })

                    .catch(function(error) {
                        console.error('İstek hatası:', error);
                    });
            } else {
                alert("E-posta adresi boş bırakılamaz.");
            }
        });
    });
    */

</script>


</body>
</html>